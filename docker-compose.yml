services:
  engine:
    build: .
    container_name: antigravity-engine
    command: python main.py
    volumes:
      - ./storage:/app/storage
      - ./.env:/app/.env
      - ./strategies.yaml:/app/strategies.yaml
    environment:
      - TZ=Europe/Moscow
      - DATABASE_URL=sqlite:///storage/data.db
    restart: unless-stopped
    networks:
      - antigravity-net

  dashboard:
    build: .
    container_name: antigravity-dashboard
    command: streamlit run dashboard.py
    volumes:
      - ./storage:/app/storage
      - ./.env:/app/.env
      - ./strategies.yaml:/app/strategies.yaml
    environment:
      - TZ=Europe/Moscow
      - DATABASE_URL=sqlite:///storage/data.db
    ports:
      - "8501:8501"
    restart: unless-stopped
    networks:
      - antigravity-net

  optimizer:
    build: .
    container_name: antigravity-optimizer
    command: python optimizer.py
    volumes:
      - ./storage:/app/storage
      - ./.env:/app/.env
      - ./strategies.yaml:/app/strategies.yaml
    environment:
      - TZ=Europe/Moscow
      - DATABASE_URL=sqlite:///storage/data.db
    restart: unless-stopped
    networks:
      - antigravity-net

networks:
  antigravity-net:
    driver: bridge
